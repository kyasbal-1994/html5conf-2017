# パフォーマンスの懸念

* その前にそのWebGLの利用は本当に必要?
    * 当然ネイティヴで実装されているタグの方が早い
    * **Webで開けることに価値がある?**
    * **既存のHTML/CSSではできない?**
    * **そもそもその表現に意味がある?**

# パフォーマンスの懸念

* 何が**「重い」**のか
    * **「ページの読み込み速度」**が重い
        * 表示まで何秒かけられる?
        * プログレスバーとかでごまかせない?
    * **「操作やフレームがカクついて」**重い
        * 1秒に何フレーム欲しい?
        * 余計な呼び出しはない? (Spector.jsなどで調べる)
        * HTMLタグ/CSSの併用も考える

# 読み込み速度問題

* 何が重いか?
    * やっぱり一番重いのは**モデル**
        * コンテンツごとに異なりうる
        (キャッシュの効果が低そう)
        * Webエンジニアのノウハウが少ない

# モデルの読み込み速度の問題

* そもそも**モデルデータ**とは
    * 頂点座標、法線座標、テクスチャ座標など各点ごとに記録した**頂点情報**
    * どの頂点同士をつないで面を作るかの**インデックス情報**
    * どのシェーダー、どのパラメーターで描画するかの**マテリアル情報**
    * **ボーンの情報**

# モデルの読み込み速度の問題

* さらに多種の**テクスチャ**
    * アルベドマップ
    * 法線マップ
    * ラフネスマップ
    * ..etc

# モデルの読み込み速度の問題

* 場合によっては以下も含みうる
    * 物理演算の剛体情報
    * 編集時に必要なデータ
    * アニメーションデータ
    * CADなどはより細かい物性のデータ

# モデルの読み込み速度の問題

* **適切なモデルファイルを採用しなければ無駄なデータが多い**
* モデルファイルは何を使っている?
    * FBX?
    * COLLADA?
    * **glTF**?

# glTF

* **Khronos**が標準化しようとしているモデルフォーマット
* **ランタイム時のための**モデルフォーマット
    * 編集が目的ではない
    * JSでのパースが非常に容易
    * WebGLでの表示が非常に楽
    * 無駄なデータが省かれた

# glTF

* ドキュメントファイルで例えるなら
    * **FBX**はdocx(ワードのファイル)
    * **COLLADA**はodt(Open Document)
    * **glTF**はpdf

# glTF

* 2.0の仕様が現在策定中
* Paint3Dにも出力機能がついた
* PBR,ボーンアニメーション、スキンアニメーションなど
* その他の機能は全て拡張

# draco

* Googleの公開している頂点情報の**圧縮用フォーマット**
* **4倍 - 12倍**程度圧縮できる
* MP4(glTF)とH.264(draco)のような関係
* glTFにdraco用の拡張仕様がある
* デコーダーが公開されているが**1MB近くある**

# draco

![](https://i.gyazo.com/1ea4e62893682524cef8f5ce12fd7200.png)

